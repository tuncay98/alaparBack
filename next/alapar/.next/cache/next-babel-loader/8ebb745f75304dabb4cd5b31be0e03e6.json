{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Component } from 'react';\nimport Utilities from '@/utilities';\n\nclass Add extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"ilkin\", () => {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [this.utility.radioGenerator(\"Əmlak:\", this.state.sellTypeList, 1, this.sellTypeCallback, \"sellType\"), this.utility.selectGenerator(\"Kategoriya:\", this.state.categoryList, \"category\", this.state.selected.category, this.categoryCallback, false, false), this.utility.selectGenerator(\"Şəhər:\", this.state.cityList, \"city\", this.state.selected.city, this.cityCallback, true, false), this.utility.selectGenerator(\"Rayon:\", this.state.regionList, \"region\", this.state.selected.region, this.regionCallback, true, false), this.utility.selectGenerator(\"Qəsəbə:\", this.state.villageList, \"village\", this.state.selected.village, this.commonCallback, true, false), this.utility.selectGenerator(\"Metro:\", this.state.metroList, \"metro\", this.state.selected.metro, this.commonCallback, true, false), this.utility.googleMap(this.state.lat, this.state.lng, this.googleMapCallback, \"Xəritə:\", \"lat\", \"lng\")]\n      });\n    });\n\n    _defineProperty(this, \"esas\", () => {\n      let sellingBox = /*#__PURE__*/_jsxs(\"div\", {\n        className: 'sellingTypeBox',\n        style: {\n          textAlign: 'center'\n        },\n        children: [this.utility.checkBoxGenerator(\"Cixaris\", this.checkboxCallback, \"licence\", this.state.license), this.utility.checkBoxGenerator(\"Barter\", this.checkboxCallback, \"barter\", this.state.addition.barter), this.utility.checkBoxGenerator(\"Ipoteka\", this.checkboxCallback, \"ipoteka\", this.state.ipoteka), this.utility.checkBoxGenerator(\"Cixaris (Icare)\", this.checkboxCallback, \"icare\", this.state.addition.icare), this.utility.checkBoxGenerator(\"Belediyye\", this.checkboxCallback, \"belediyye\", this.state.addition.belediyye)]\n      });\n\n      let rentingBox = /*#__PURE__*/_jsxs(\"div\", {\n        className: 'rentingBox',\n        style: {\n          textAlign: 'center'\n        },\n        children: [this.utility.checkBoxGenerator(\"Mətbəx Mebeli\", this.checkboxCallback, \"metbex\", this.state.rentalAddition.metbexM), this.utility.checkBoxGenerator(\"Qabyuyan\", this.checkboxCallback, \"qab\", this.state.rentalAddition.qabY), this.utility.checkBoxGenerator(\"Paltaryuyan\", this.checkboxCallback, \"paltar\", this.state.rentalAddition.paltarY), this.utility.checkBoxGenerator(\"Soyuducu\", this.checkboxCallback, \"soyuducu\", this.state.rentalAddition.soyuducu), this.utility.checkBoxGenerator(\"TV\", this.checkboxCallback, \"tv\", this.state.rentalAddition.tv), this.utility.checkBoxGenerator(\"Kondicionser\", this.checkboxCallback, \"kondicionser\", this.state.rentalAddition.kondicionser), this.utility.checkBoxGenerator(\"Internet\", this.checkboxCallback, \"internet\", this.state.rentalAddition.internet), this.utility.checkBoxGenerator(\"Telefon\", this.checkboxCallback, \"telefon\", this.state.rentalAddition.telefon), this.utility.checkBoxGenerator(\"Usag ilə\", this.checkboxCallback, \"usag\", this.state.rentalAddition.usag), this.utility.checkBoxGenerator(\"Heyvan ilə\", this.checkboxCallback, \"heyvan\", this.state.rentalAddition.heyvan)]\n      });\n\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [this.utility.selectGenerator(\"Kirayə müddəti:\", this.state.rentDurationList, \"rentDuration\", this.state.selected.rentDuration, this.commonCallback, true, false), this.utility.numberGenerator(\"Qiymət:\", \"Daxil Edin\", this.numberCallback, \"price\", true), this.utility.numberGenerator(\"Sahə:\", \"Daxil Edin\", this.numberCallback, \"areaSize\", true), this.utility.numberGenerator(\"Otag:\", \"Daxil Edin\", this.numberCallback, \"roomAmount\", this.state.addition.roomAmount), this.utility.selectGenerator(\"Torpag Teyinati:\", this.state.addition.landAppointment ? this.state.landAppointmentList : false, \"landAppointment\", this.state.selected.landAppointment, this.commonCallback, null, true, false), this.utility.numberGenerator(\"Menzil Mertebesi:\", \"Daxil Edin\", this.numberCallback, \"floor\", this.state.addition.floor), this.utility.numberGenerator(\"Bina Mertebesi:\", \"Daxil Edin\", this.numberCallback, \"buildingFloor\", this.state.addition.buildingFloor), /*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [this.utility.checkBoxGenerator(\"Hamam\", this.checkboxCallback, \"hamam\", this.state.addition.hamam), this.utility.checkBoxGenerator(\"Eyvan\", this.checkboxCallback, \"eyvan\", this.state.addition.eyvan), this.utility.checkBoxGenerator(\"Lift\", this.checkboxCallback, \"lift\", this.state.addition.lift), this.utility.checkBoxGenerator(\"Mebel\", this.checkboxCallback, \"mebel\", this.state.addition.mebel), this.utility.checkBoxGenerator(\"Temir\", this.checkboxCallback, \"temir\", this.state.addition.temir), this.utility.checkBoxGenerator(\"Hovuz\", this.checkboxCallback, \"hovuz\", this.state.addition.hovuz), this.utility.checkBoxGenerator(\"Qaz\", this.checkboxCallback, \"qaz\", this.state.addition.qaz), this.utility.checkBoxGenerator(\"Su\", this.checkboxCallback, \"su\", this.state.addition.su), this.utility.checkBoxGenerator(\"Isig\", this.checkboxCallback, \"isig\", this.state.addition.isig), this.utility.checkBoxGenerator(\"Kanalizasiya\", this.checkboxCallback, \"kanalizasiya\", this.state.addition.kanalizasiya)]\n        }), this.state.rentingTypeBoxVisibility ? rentingBox : null, this.utility.textAreaGeneretor(\"Məlumat:\", \"Ən azı 100 hərfdən ibarət olmalıdır\", this.textAreaCallback, \"aboutInfo\"), this.state.sellingTypeBoxVisibility ? sellingBox : null, this.utility.imageUploadGenerator(this.state.fileList, this.state.previewVisible, this.state.previewTitle, this.state.previewImage)]\n      });\n    });\n\n    _defineProperty(this, \"elaqe\", () => {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [this.utility.inputGenerator(\"E-mail:\", \"Daxil Edin\", this.textAreaCallback, \"email\"), this.utility.inputGenerator(\"Nömrə:\", \"Daxil Edin\", this.textAreaCallback, \"phone\"), this.utility.inputGenerator(\"Ad:\", \"Daxil Edin\", this.textAreaCallback, \"name\"), this.utility.radioGenerator(\"Əlaqədar Şəxsin Statusu:\", [{\n          id: 1,\n          name: \"Sahibi\"\n        }, {\n          id: 0,\n          name: \"Vastəçi\"\n        }], 1, this.ownerCallback, \"owner\"), /*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [this.utility.checkBoxGenerator(\"WhatsApp\", this.checkboxCallback, \"wp\", true), this.utility.checkBoxGenerator(\"Zəng\", this.checkboxCallback, \"call\", true)]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"button\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            onClick: this.submitClick,\n            children: \"Elave et\"\n          })\n        })]\n      });\n    });\n\n    _defineProperty(this, \"elave\", () => {\n      return /*#__PURE__*/_jsx(\"div\", {});\n    });\n\n    _defineProperty(this, \"tabArr\", [\"İlkin\", \"Əsas\", \"Əlaqə\"]);\n\n    _defineProperty(this, \"validation\", () => {\n      let inputs = document.querySelectorAll(\"#addSection [validatename]\");\n      let hasError = false;\n\n      for (let index = 0; index < inputs.length; index++) {\n        if (!this.state.selected[inputs[index].getAttribute(\"validatename\")]) {\n          if (!hasError) {\n            hasError = !hasError;\n          }\n\n          let text = `Məlumat Doldurulmayıb: ${inputs[index].getAttribute(\"validatename\")}`;\n          this.utility.showError(text);\n          let ele = inputs[index].querySelector(\".ant-select-selector\") || inputs[index].querySelector(\"textarea\") || inputs[index].querySelector(\"input\");\n\n          if (ele) {\n            ele.classList.add(\"errorBorder\");\n\n            ele.onclick = e => {\n              ele.classList.remove(\"errorBorder\");\n            };\n          }\n        }\n      }\n\n      if (this.state.selected.images == null || this.state.selected.images.length == 0) {\n        let text = `Məlumat Doldurulmayıb: Şəkillər`;\n        this.utility.showError(text);\n        return false;\n      }\n\n      return !hasError;\n    });\n\n    _defineProperty(this, \"submitClick\", async e => {\n      if (this.validation()) return;\n      let header = {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        mode: 'cors',\n        body: JSON.stringify(this.state.selected)\n      };\n      let res = await fetch(\"http://192.168.1.107:5566/api/bina/Add\", header);\n\n      if (res.status == 200) {\n        alert(\"Done\");\n      }\n    });\n\n    _defineProperty(this, \"googleMapCallback\", w => {\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          lat: w.latLng.lat(),\n          lng: w.latLng.lng()\n        }),\n        lat: w.latLng.lat(),\n        lng: w.latLng.lng()\n      }));\n    });\n\n    _defineProperty(this, \"ownerCallback\", value => {\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          owner: value.target.value\n        })\n      }));\n    });\n\n    _defineProperty(this, \"sellTypeCallback\", value => {\n      let rent = this.state.sellTypeList.find(w => w.id == value.target.value).rent;\n      this.setState(_objectSpread(_objectSpread({}, this.state), {}, {\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          sellType: value.target.value,\n          rentDuration: rent.length > 0 ? this.state.selected.rentDuration : null\n        }),\n        rentDurationList: rent.length > 0 ? rent : null,\n        sellingTypeBoxVisibility: rent.length > 0 ? false : true,\n        rentingTypeBoxVisibility: rent.length > 0 ? true : false\n      }));\n    });\n\n    _defineProperty(this, \"categoryCallback\", value => {\n      let arr = Object.keys(this.state.addition);\n      let changeable = {};\n      arr.filter(w => this.state.selected.hasOwnProperty(w)).map(w => {\n        changeable[w] = null;\n      });\n      this.setState({\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          category: value\n        }, changeable),\n        addition: _objectSpread({}, this.props.filter.categories.find(w => w.id == value)),\n        rentalAddition: this.props.filter.rentals.find(w => w.id == this.props.filter.categories.find(w => w.id == value).rentalProİd) || {}\n      });\n    });\n\n    _defineProperty(this, \"cityCallback\", value => {\n      let regions = this.state.cityList.find(w => w.id == value).regions;\n      let metros = this.state.cityList.find(w => w.id == value).metros;\n      this.setState({\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          city: value,\n          region: null,\n          village: null,\n          metro: null\n        }),\n        metroList: !metros.length ? null : metros,\n        regionList: !regions.length ? null : regions,\n        villageList: null\n      });\n    });\n\n    _defineProperty(this, \"regionCallback\", value => {\n      if (!value) {\n        this.setState({\n          selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n            region: 0,\n            village: null\n          }),\n          villageList: null\n        });\n        return;\n      }\n\n      let villages = this.state.regionList.find(w => w.id == value).villages;\n      this.setState({\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          region: value,\n          village: null\n        }),\n        villageList: !villages.length ? null : villages\n      });\n    });\n\n    _defineProperty(this, \"commonCallback\", (value, option) => {\n      this.setState({\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          [option.state]: value\n        })\n      });\n    });\n\n    _defineProperty(this, \"textAreaCallback\", value => {\n      this.setState({\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          [value.target.name]: value.target.defaultValue\n        })\n      });\n    });\n\n    _defineProperty(this, \"numberCallback\", value => {\n      this.setState({\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          [value.target.name]: +value.target.defaultValue.replace(/\\$\\s?|(,*)/g, '')\n        })\n      });\n    });\n\n    _defineProperty(this, \"checkboxCallback\", e => {\n      let value = e.target.checked;\n      this.setState({\n        selected: _objectSpread(_objectSpread({}, this.state.selected), {}, {\n          [e.target.state]: value\n        })\n      });\n    });\n\n    this.utility = new Utilities(this);\n    this.columnSize = 12;\n    this.state = _objectSpread(_objectSpread({}, this.utility.getImageState), {}, {\n      selected: {\n        images: null,\n        //list<string>\n        category: null,\n        //int\n        city: null,\n        //int\n        region: null,\n        //int\n        village: null,\n        //int\n        metro: null,\n        //int\n        sellType: null,\n        //int\n        licence: null,\n        //bool\n        ipoteka: null,\n        //bool\n        roomAmount: null,\n        //int\n        floor: null,\n        //int\n        buildingFloor: null,\n        //int\n        landAppointment: null,\n        //int\n        icare: null,\n        //bool\n        belediyye: null,\n        //bool\n        rentDuration: null,\n        //int\n        price: null,\n        //int\n        areaSize: null,\n        //int\n        aboutInfo: null,\n        //string\n        email: null,\n        //string\n        phone: null,\n        //string\n        name: null,\n        //string\n        wp: null,\n        //bool\n        call: null,\n        //bool\n        lat: null,\n        lng: null,\n        hamam: null,\n        eyvan: null,\n        lift: null,\n        mebel: null,\n        temir: null,\n        hovuz: null,\n        qaz: null,\n        su: null,\n        isig: null,\n        kanalizasiya: null,\n        barter: null,\n        owner: 1,\n        metbex: null,\n        qab: null,\n        paltar: null,\n        soyuducu: null,\n        tv: null,\n        kondicionser: null,\n        internet: null,\n        telefon: null,\n        usag: null,\n        heyvan: null\n      },\n      sellingTypeBoxVisibility: true,\n      rentingTypeBoxVisibility: false,\n      mapVisible: false,\n      sellTypeList: null,\n      categoryList: null,\n      cityList: null,\n      regionList: null,\n      villageList: null,\n      metroList: null,\n      landAppointmentList: null,\n      rentDurationList: null,\n      license: true,\n      ipoteka: true,\n      price: true,\n      area: true,\n      lat: 40.409264,\n      lng: 49.867092,\n      activeKey: \"1\",\n      addition: {\n        roomAmount: false,\n        floor: false,\n        buildingFloor: false,\n        landAppointment: false,\n        icare: false,\n        belediyye: false,\n        barter: true\n      },\n      rentalAddition: {}\n    });\n\n    if (this.props.filter) {\n      this.state.categoryList = this.props.filter.categories;\n      this.state.cityList = this.props.filter.cities;\n      this.state.sellTypeList = this.props.filter.sellTypes;\n      this.state.landAppointmentList = this.props.filter.landAppointment;\n      this.state.selected = _objectSpread(_objectSpread({}, this.state.selected), {}, {\n        sellType: this.props.filter.sellTypes[0].id\n      });\n    }\n  }\n\n  render(h) {\n    return /*#__PURE__*/_jsx(\"div\", {\n      id: 'addSection',\n      children: this.utility.tabGenerator(this.tabArr, this.ilkin(), this.esas(), this.elaqe())\n    });\n  }\n\n}\n\nexport async function getStaticProps() {\n  const res = await fetch('http://192.168.1.107:5566/api/bina/Form');\n  const filter = await res.json();\n  return {\n    props: {\n      filter\n    }\n  };\n}\nexport default Add;","map":null,"metadata":{},"sourceType":"module"}